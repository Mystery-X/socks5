<html><head>
<title>socks5 - Implements client support for SOCKS 5 proxies</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file '' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2012 Blair Kitchen &lt;blair@the-blair.com&gt;
   -->
<! -- CVS: $Id$ socks5.n
   -->
<body><div class="doctools">
<h1 class="title">socks5(n) 1.0  &quot;Implements client support for SOCKS 5 proxies&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>socks5 - Implements client support for SOCKS 5 proxies</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">COMMANDS</a></li>
<li class="section"><a href="#section3">EXAMPLES</a></li>
<li class="section"><a href="#section4">KNOWN LIMITATIONS</a></li>
<li class="section"><a href="#section5">LICENSE</a></li>
<li class="section"><a href="#section6">BUGS</a></li>
<li class="section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.5</b></li>
<li>package require <b class="pkgname">socks5 <span class="opt">?1.0?</span></b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">::socks5::configure</b> <span class="opt">?<i class="arg">options</i>?</span></a></li>
<li><a href="#2"><b class="cmd">::socks5::connect</b> <span class="opt">?<i class="arg">options</i>?</span> <i class="arg">hostname</i> <i class="arg">port</i></a></li>
<li><a href="#3"><b class="cmd">::socks5::bind</b> <span class="opt">?<i class="arg">options</i>?</span> <i class="arg">hostname</i> <i class="arg">port</i> <i class="arg">command</i></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>This package provides routines for connecting to remote servers via a SOCKS 5
proxy server.  Support for both CONNECT and BIND methods is included.</p>
</div>
<div id="section2" class="section"><h2><a name="section2">COMMANDS</a></h2>
<dl class="definitions">
<dt><a name="1"><b class="cmd">::socks5::configure</b> <span class="opt">?<i class="arg">options</i>?</span></a></dt>
<dd><p>Configure the library for use by specifying information such as the proxy
server, port number, etc.</p>
<dl class="definitions">
<dt><b class="cmd">-proxy</b> <i class="arg">hostname</i></dt>
<dd><p><i class="term">Hostname</i> specifies the domain-style name or numerical IP address
    of the proxy server.</p></dd>
<dt><b class="cmd">-proxyport</b> <i class="arg">port</i></dt>
<dd><p><i class="term">Port</i> specifies an integer port number on which the proxy server
    will respond to incoming requests.</p></dd>
<dt><b class="cmd">-bindtimeout</b> <i class="arg">timeout</i></dt>
<dd><p><i class="term">Timeout</i> specifies a timeout (in milliseconds) when waiting for 
    an incoming connection via <b class="cmd">::socks5::bind</b></p></dd>
<dt><b class="cmd">-username</b> <i class="arg">username</i></dt>
<dd><p><i class="term">Username</i> specifies the username to be used when the proxy
    server requires username/password authentication.  Providing an empty
    value for this option disables the use of authentication.</p></dd>
<dt><b class="cmd">-password</b> <i class="arg">password</i></dt>
<dd><p><i class="term">Password</i> specifies the password to be used when the proxy
    server requires username/password authentication.  Providing an empty
    value for this option disables the use of authentication.</p></dd>
</dl>
<p>The following example illustrates use of the <b class="cmd">::socks5::configure</b> command.</p>
<pre class="example">::socks5::configure -proxy localhost -proxyport 1080 -bindtimeout 2000</pre>
</dd>
<dt><a name="2"><b class="cmd">::socks5::connect</b> <span class="opt">?<i class="arg">options</i>?</span> <i class="arg">hostname</i> <i class="arg">port</i></a></dt>
<dd><p>Establishes a connection with a remote host through the configured proxy</p>
<dl class="definitions">
<dt><b class="cmd">-myaddr</b> <i class="arg">addr</i></dt>
<dd><p><i class="term">Addr</i> gives the domain-style name or numerical IP address of the 
    client-side network interface to use for the connection.  This option 
    may be useful if the client machine has multiple network interfaces.
    If the option is omitted then the client-side interface will be chosen
    by the system software.</p></dd>
<dt><b class="cmd">-myport</b> <i class="arg">port</i></dt>
<dd><p><i class="term">Port</i> specifies an integer port number (or service name, where
    supported and understood by the host operating system) to use for the
    client's side of the connection.  If this option is omitted, the client's
    port number will be chosen at random by the system software.</p></dd>
</dl>
<p>The following example illustrates use of the <b class="cmd">::socks5::connect</b> command.</p>
<pre class="example">::socks5::connect www.google.com 80</pre>
</dd>
<dt><a name="3"><b class="cmd">::socks5::bind</b> <span class="opt">?<i class="arg">options</i>?</span> <i class="arg">hostname</i> <i class="arg">port</i> <i class="arg">command</i></a></dt>
<dd><p>Requests the proxy open a TCP port for listening and wait for an incoming
connection from the specified host and port. <i class="term">Hostname</i> gives the 
anticipated domain-style name or numerical IP address of the incoming
connection.  <i class="term">Port</i> specifies the integer port number of the incoming
connection.</p>
<p>The <i class="term">command</i> parameter will be evaluated at the global scope when the
incoming connection is established.  Two parameters will be appended.  The
first indicates the type of response from the proxy, while the second depends
on the response.</p>
<dl class="definitions">
<dt><b class="cmd">-myaddr</b> <i class="arg">addr</i></dt>
<dd><p><i class="term">Addr</i> gives the domain-style name or numerical IP address of the
    client-side network interface to use for the connection.  This option
    may be useful if the client machine has multiple network interfaces.
    If the option is omitted then the client-side interface will be chosen
    by the system software.</p></dd>
<dt><b class="cmd">-myport</b> <i class="arg">port</i></dt>
<dd><p><i class="term">Port</i> specifies an integer port number (or service name, where
    supported and understood by the host operating system) to use for the
    client's side of the connection.  If this option is omitted, the client's
    port number will be chosen at random by the system software.</p></dd>
</dl>
<p>The following example illustrates use of the <b class="cmd">::socks5::bind</b> command.</p>
<pre class="example">
proc handle_connect {result arg} {
    if {$result eq &quot;ok&quot;} {
        puts &quot;connection established via channel $arg&quot;
    } elseif {$result eq &quot;timeout&quot;} {
        puts &quot;timeout expired while waiting for connection&quot;
    } elseif {$result eq &quot;error&quot;} {
        puts &quot;error from proxy while waiting for connection: $arg&quot;
    }
}
::socks5::bind ftp.cdrom.com 21 handle_connect
</pre>
</dd>
</dl>
</div>
<div id="section3" class="section"><h2><a name="section3">EXAMPLES</a></h2>
<p>The <i class="term">socks5</i> package can be used to SOCKS enable the <i class="term">http</i> package.
This is useful for passing all HTTP requests through the Tor network, for
example.  Assuming you have Tor running on your local system and listening for
connections on port 9050, the following sample code demonstrates how to enable
http use of Tor.</p>
<pre class="example">
package require Tcl 8.5
package require tls 1.6
package require http 2.7
package require socks5
proc httpsConnect {host port} {
    # Establish connection with SOCKS 5
    set sock [::socks5::connect $host $port]
    # Enable SSL on open socket
    ::tls::import $sock
    return $sock
}
::http::register http 80 ::socks5::connect
::http::register https 443 ::httpsConnect
::socks5::configure -proxy localhost -port 9050
# Retrieve https://check.torproject.org to confirm we are using Tor
set token [::http::geturl &quot;https://check.torproject.org&quot; -channel stdout]
::http::cleanup $token
</pre>
</div>
<div id="section4" class="section"><h2><a name="section4">KNOWN LIMITATIONS</a></h2>
<p>The following known limitations exist:</p>
<ul class="itemized">
<li><p>No support for IPv6</p></li>
<li><p>Support for username/password authentication only</p></li>
<li><p>No support for the UDP ASSOCIATE command</p></li>
</ul>
</div>
<div id="section5" class="section"><h2><a name="section5">LICENSE</a></h2>
<p>This software is released under the BSD license.</p>
</div>
<div id="section6" class="section"><h2><a name="section6">BUGS</a></h2>
<p>Please report all bugs online at <a href="https://github.com/dongola7/socks5/issues">https://github.com/dongola7/socks5/issues</a>.</p>
</div>
<div id="copyright" class="section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2012 Blair Kitchen &lt;blair@the-blair.com&gt;</p>
</div>
</div></body></html>

